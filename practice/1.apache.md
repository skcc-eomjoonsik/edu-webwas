# Apache 템플릿 설치 및 인스턴스(템플릿) 구성

## 설치 환경 확인

- 웹 서버에서 진행합니다.

### 1. 실습 폴더로 이동

```bash
cd /home/webwas/education
```

### 2. Apache 설치 파일 압축 해제 및 폴더로 이동

```bash
# 압축 해제
tar xvf httpd-2.4.62.tar.gz

# 압축 해제된 폴더로 이동
cd httpd-2.4.62

# srclib 폴더 확인
ls -l srclib
```

### 3. 패키지 확인

```bash
# gcc
rpm -qa gcc

# perl
rpm -qa perl

# pcre, pcre-devel
rpm -qa pcre pcre-devel

# openssl, openssl-devel
rpm -qa openssl openssl-devel

# expat, expat-devel
rpm -qa expat expat-devel

# nghttp2, nghttp2-devel
rpm -qa nghttp2 libnghttp2-devel
```

### 4. Apache 설치(컴파일)

```bash
# configure : 설치에 관련된 설정 적용
# -- prefix: 설치 경로
# -- enable-mods-shared: 모듈 활성화
# -- with-mpm: MPM 설정(event 방식)
# -- with-included-apr: APR 포함하여 컴파일
# -- enable-ssl: SSL 활성화
# -- enable-http2: HTTP/2 활성화
./configure --prefix=/software/apache \
            --enable-mods-shared=all \
            --with-mpm=event \
            --with-included-apr \
            --enable-ssl \
            --enable-http2

# make : gcc 컴파일
make

# make install : 컴파일된 파일을 설치 경로에 복사
make install
```

### 5. Apache 실행

```bash
# Apache 실행 - 에러
cd /software/apache/bin
./apachectl start

# 설정 파일 변경(Port 80 -> 8080)
cd /software/apache/conf
sed -i 's/^Listen 80$/Listen 8080/' httpd.conf

# Apache 실행
cd /software/apache/bin
./apachectl start
```

### 6. Apache 템플릿 구성

```bash
# 템플릿 폴더 생성
mkdir -p /software/apache/template

```
